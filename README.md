# Licensify

–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏—è Flutter/Dart –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –Ω–∞–¥–µ–∂–Ω–æ–π –∑–∞—â–∏—Ç–æ–π –∏ –≥–∏–±–∫–∏–º–∏ –æ–ø—Ü–∏—è–º–∏.

## –û–ø–∏—Å–∞–Ω–∏–µ

`licensify` - —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è, –Ω–æ –º–æ—â–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –≤–∞—à–∏ Flutter –∏ Dart –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞—â–∏—â–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏—Ü–µ–Ω–∑–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –ø–æ–¥–ø–∏—Å–µ–π –∏ –≥–∏–±–∫—É—é —Å–∏—Å—Ç–µ–º—É –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∏–ø–æ–≤ –ª–∏—Ü–µ–Ω–∑–∏–π.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîí **–ù–∞–¥–µ–∂–Ω–∞—è –∑–∞—â–∏—Ç–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HMAC-SHA256 –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –ª–∏—Ü–µ–Ω–∑–∏–π
- üïí **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–∞–º–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –ª–∏—Ü–µ–Ω–∑–∏–π
- üîÑ **–†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –ª–∏—Ü–µ–Ω–∑–∏–π**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ trial, standard, pro –∏ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤
- üìã **–†–∞—Å—à–∏—Ä—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è custom-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –ª–∏—Ü–µ–Ω–∑–∏–∏
- üíæ **–ì–∏–±–∫–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤ –ø–∞–º—è—Ç–∏
- üì≤ **–ü—Ä–æ—Å—Ç–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ**: –õ–µ–≥–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ª—é–±–æ–µ Dart/Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–æ–±–∞–≤—å—Ç–µ `licensify` –≤ –≤–∞—à `pubspec.yaml`:

```yaml
dependencies:
  licensify: ^1.0.0
```

–ò –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
dart pub get
```

–î–ª—è Flutter –ø—Ä–æ–µ–∫—Ç–æ–≤:

```bash
flutter pub get
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–π –ª–∏—Ü–µ–Ω–∑–∏–∏

```dart
import 'package:licensify/licensify.dart';

// –°–æ–∑–¥–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ª–∏—Ü–µ–Ω–∑–∏–π —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º
final generator = GenerateLicenseUseCase(signatureKey: yourPrivateKey);

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–π –ª–∏—Ü–µ–Ω–∑–∏–∏
final license = generator.generateLicense(
  appId: 'com.your.app',
  expirationDate: DateTime.now().add(const Duration(days: 30)),
  type: LicenseType.pro,
  features: {'maxUsers': 10, 'canExport': true},
);

// –≠–∫—Å–ø–æ—Ä—Ç –≤ –±–∞–π—Ç—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª
final licenseBytes = generator.licenseToBytes(license);
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—Ü–µ–Ω–∑–∏–∏

```dart
import 'package:licensify/licensify.dart';

// –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞
final storage = LicenseStorage();
final repository = LicenseRepository(storage: storage);
final validator = LicenseValidator(publicKey: yourPublicKey);

// –°–æ–∑–¥–∞–Ω–∏–µ —é–∑–∫–µ–π—Å–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
final licenseChecker = CheckLicenseUseCase(
  repository: repository,
  validator: validator,
);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –ª–∏—Ü–µ–Ω–∑–∏–∏
final licenseStatus = await licenseChecker.checkCurrentLicense();

if (licenseStatus.isActive) {
  // –õ–∏—Ü–µ–Ω–∑–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞
  final activeLicense = (licenseStatus as ActiveLicenseStatus).license;
  print('–õ–∏—Ü–µ–Ω–∑–∏—è –∞–∫—Ç–∏–≤–Ω–∞ –¥–æ: ${activeLicense.expirationDate}');
  print('–û—Å—Ç–∞–ª–æ—Å—å –¥–Ω–µ–π: ${activeLicense.remainingDays}');
} else if (licenseStatus.isExpired) {
  // –õ–∏—Ü–µ–Ω–∑–∏—è –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞
  print('–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ª–∏—Ü–µ–Ω–∑–∏–∏ –∏—Å—Ç–µ–∫');
} else if (licenseStatus.isInvalid) {
  // –õ–∏—Ü–µ–Ω–∑–∏—è –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞
  print('–õ–∏—Ü–µ–Ω–∑–∏—è –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ (–Ω–µ–≤–µ—Ä–Ω–∞—è –ø–æ–¥–ø–∏—Å—å)');
} else if (licenseStatus.isNoLicense) {
  // –õ–∏—Ü–µ–Ω–∑–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
  print('–õ–∏—Ü–µ–Ω–∑–∏—è –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞');
} else if (licenseStatus.isError) {
  // –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ
  print('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ª–∏—Ü–µ–Ω–∑–∏–∏');
}
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ª–∏—Ü–µ–Ω–∑–∏–π

```dart
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–∏ –∏–∑ —Ñ–∞–π–ª–∞
final success = await repository.saveLicenseFromFile('path/to/license.dat');

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–∏ –∏–∑ –±–∞–π—Ç–æ–≤
final licenseBytes = readLicenseBytes(); // –≤–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è —á—Ç–µ–Ω–∏—è –±–∞–π—Ç–æ–≤
final savedFromBytes = await repository.saveLicenseFromBytes(licenseBytes);

// –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–∏
final removed = await repository.removeLicense();
```

### –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Ö—Ä–∞–Ω–∏–ª–∏—â

#### –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

```dart
final directoryProvider = DefaultLicenseDirectoryProvider();
final storage = FileLicenseStorage(
  directoryProvider: directoryProvider,
  licenseFileName: 'license.dat',
);
final repository = LicenseRepository(storage: storage);
```

#### –•—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –ø–∞–º—è—Ç–∏

```dart
// –ü—É—Å—Ç–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –ø–∞–º—è—Ç–∏
final storage = InMemoryLicenseStorage();

// –ò–ª–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
final licenseData = Uint8List.fromList([/* –¥–∞–Ω–Ω—ã–µ –ª–∏—Ü–µ–Ω–∑–∏–∏ */]);
final storage = InMemoryLicenseStorage.withData(licenseData);

final repository = LicenseRepository(storage: storage);
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö Clean Architecture:

- **Domain Layer**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
  - Entities: License, LicenseStatus
  - Repositories: ILicenseRepository
  - UseCases: CheckLicenseUseCase, GenerateLicenseUseCase

- **Data Layer**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
  - Repositories: LicenseRepository
  - Data Sources: 
    - FileLicenseStorage - —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ª–∏—Ü–µ–Ω–∑–∏–π –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
    - InMemoryLicenseStorage - —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ª–∏—Ü–µ–Ω–∑–∏–π –≤ –ø–∞–º—è—Ç–∏ 
  - Validators: LicenseValidator

## –õ–∏—Ü–µ–Ω–∑–∏—è

```
SPDX-FileCopyrightText: 2025 Karim "nogipx" Mamatkazin <nogipx@gmail.com>
SPDX-License-Identifier: LGPL-3.0-or-later
```

–≠—Ç–æ—Ç –ø–∞–∫–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π LGPL-3.0. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ LICENSE.

---

–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è by nogipx
